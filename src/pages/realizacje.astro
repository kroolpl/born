---
import Layout from '../layouts/Layout.astro';

const realizacje = [
  {
    title: "Osiedle Parkowe",
    location: "Warszawa, Wilanów",
    status: "Ukończone",
    image: "/images/domy1.jpg",
    floorPlan: "/images/floorplans/osiedle-parkowe-plan.jpg",
    year: "2023",
    description: "Kompleks 12 domów jednorodzinnych w zabudowie szeregowej",
    features: ["4 pokoje", "2 łazienki", "Garaż", "Ogród"],
    stats: {
      area: "180m²",
      completion: "100%",
      units: "12",
      price: "od 1.2M PLN"
    }
  },
  {
    title: "Rezydencja Leśna",
    location: "Izabelin",
    status: "W realizacji",
    image: "/images/zimowo.jpg",
    floorPlan: "/images/floorplans/rezydencja-lesna-plan.jpg",
    year: "2024",
    description: "Ekskluzywne domy wolnostojące w otulinie Kampinoskiego Parku Narodowego",
    features: ["5 pokoi", "3 łazienki", "Podwójny garaż", "Duża działka"],
    stats: {
      area: "250m²",
      completion: "60%",
      units: "8",
      price: "od 2.5M PLN"
    }
  },
  {
    title: "Apartamenty Nadwiślańskie",
    location: "Warszawa, Powiśle",
    status: "Planowane",
    image: "/images/arch1.jpg",
    floorPlan: "/images/floorplans/apartamenty-nadwislanskie-plan.jpg",
    year: "2025",
    description: "Nowoczesny kompleks apartamentowy z widokiem na Wisłę",
    features: ["2-4 pokoje", "Taras", "Podziemny parking", "Recepcja"],
    stats: {
      area: "45-120m²",
      completion: "0%",
      units: "48",
      price: "od 890k PLN"
    }
  }
];
---

<Layout title="Nasze Realizacje | BORN">
  <style>
    .photo-btn.active,
    .plan-btn.active {
      background-color: var(--accent-color, #FC431C);
      color: white;
    }

    .photo-btn:not(.active),
    .plan-btn:not(.active) {
      color: var(--primary-color, #1A1A1A);
    }

    .photo-btn:not(.active):hover,
    .plan-btn:not(.active):hover {
      background-color: #f3f4f6;
    }

    .plan-container.hidden {
      display: none;
    }
  </style>

  <main>
    <!-- Hero Section -->
    <section class="relative min-h-[60vh] flex items-center bg-gray-50 overflow-hidden">
      <div class="absolute inset-0">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, rgba(252,67,28,0.08) 1px, transparent 0); background-size: 40px 40px;"></div>
        <div class="absolute top-0 right-0 w-1/3 h-full bg-accent opacity-5 -skew-x-12"></div>
      </div>
      <div class="container mx-auto px-4 relative z-10 pt-32">
        <div class="max-w-3xl">
          <div class="inline-flex items-center space-x-2 mb-8">
            <span class="h-px w-8 bg-accent"></span>
            <span class="text-accent font-medium tracking-wide text-sm">NASZE REALIZACJE</span>
          </div>
          <h1 class="font-display text-5xl md:text-7xl font-bold text-primary mb-8 leading-tight">
            Projekty, które 
            <span class="relative inline-block">
              <span class="relative z-10">Tworzą</span>
              <span class="absolute bottom-2 left-0 w-full h-3 bg-accent/20 -rotate-1"></span>
            </span>
            <br/>
            Przyszłość
          </h1>
          <p class="text-xl text-secondary max-w-2xl leading-relaxed">
            Odkryj nasze flagowe inwestycje i przekonaj się, dlaczego jesteśmy liderem w tworzeniu wyjątkowych przestrzeni mieszkalnych
          </p>
        </div>
      </div>
    </section>

    <!-- Quick Stats -->
    <section class="bg-white py-12 relative z-20">
      <div class="container mx-auto px-4">
        <div class="bg-white rounded-2xl shadow-lg p-8 grid grid-cols-2 md:grid-cols-4 gap-8">
          <div class="text-center">
            <div class="text-4xl font-display font-bold text-accent mb-2">15+</div>
            <p class="text-secondary">Lat doświadczenia</p>
          </div>
          <div class="text-center">
            <div class="text-4xl font-display font-bold text-primary mb-2">3</div>
            <p class="text-secondary">Aktywne projekty</p>
          </div>
          <div class="text-center">
            <div class="text-4xl font-display font-bold text-accent mb-2">68</div>
            <p class="text-secondary">Dostępnych mieszkań</p>
          </div>
          <div class="text-center">
            <div class="text-4xl font-display font-bold text-primary mb-2">98%</div>
            <p class="text-secondary">Zadowolonych klientów</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Grid -->
    <section class="py-24">
      <div class="container mx-auto px-4">
        {realizacje.map((projekt, index) => (
          <div class="mb-32 last:mb-0">
            <!-- Mobile-first layout -->
            <div class="flex flex-col md:grid md:grid-cols-2 gap-8 md:gap-16 md:items-center">
              <!-- Title Section (Always on top for mobile) -->
              <div class="order-1 md:order-none mb-6 md:mb-0">
                <div class="flex items-center space-x-4 mb-4">
                  <span class={`px-4 py-2 rounded-full text-sm font-medium ${
                    projekt.status === 'Ukończone' ? 'bg-green-100 text-green-800' :
                    projekt.status === 'W realizacji' ? 'bg-blue-100 text-blue-800' :
                    'bg-orange-100 text-orange-800'
                  }`}>
                    {projekt.status}
                  </span>
                  <span class="text-accent font-medium">{projekt.year}</span>
                </div>
                <h2 class="font-display text-3xl md:text-5xl font-bold text-primary mb-4">
                  {projekt.title}
                </h2>
                <div class="flex items-center text-secondary mb-4">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                  {projekt.location}
                </div>
              </div>

              <!-- Image Section -->
              <div class="order-2 md:order-none relative ${index % 2 === 1 ? 'md:order-1' : ''}">
                <!-- Image Toggle Buttons -->
                <div class="absolute top-4 left-4 z-30 bg-white/90 backdrop-blur-sm rounded-lg p-1 shadow-lg">
                  <div class="flex space-x-2">
                    <button 
                      class="px-4 py-2 rounded-md text-sm font-medium transition-colors photo-btn active"
                      data-index={index}
                      data-type="photo"
                    >
                      Zdjęcie
                    </button>
                    <button 
                      class="px-4 py-2 rounded-md text-sm font-medium transition-colors plan-btn"
                      data-index={index}
                      data-type="plan"
                    >
                      Plan
                    </button>
                  </div>
                </div>

                <div class="relative">
                  <div class="aspect-[4/3] rounded-2xl overflow-hidden">
                    <!-- Property Photo -->
                    <div class="photo-container w-full h-full" data-index={index}>
                      <img 
                        src={projekt.image} 
                        alt={projekt.title} 
                        class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
                      />
                    </div>

                    <!-- Floor Plan -->
                    <div class="plan-container w-full h-full absolute inset-0 bg-white hidden" data-index={index}>
                      <img 
                        src={projekt.floorPlan} 
                        alt={`Plan mieszkania ${projekt.title}`} 
                        class="w-full h-full object-contain p-4"
                      />
                    </div>
                  </div>

                  <!-- Decorative elements -->
                  <div class="absolute -bottom-8 -right-8 bg-white p-6 rounded-2xl shadow-xl">
                    <div class="text-3xl font-display font-bold text-accent">{projekt.year}</div>
                  </div>
                </div>
                <div class="absolute -z-10 top-8 -right-8 w-full h-full border-2 border-accent/20 rounded-2xl"></div>
              </div>

              <!-- Content Section -->
              <div class="order-3 md:order-none space-y-8 mt-8 md:mt-0">
                <p class="text-lg text-secondary leading-relaxed">
                  {projekt.description}
                </p>

                <!-- Project Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="text-sm text-secondary mb-1">Powierzchnia</div>
                    <div class="font-display font-bold text-primary">{projekt.stats.area}</div>
                  </div>
                  <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="text-sm text-secondary mb-1">Zaawansowanie</div>
                    <div class="font-display font-bold text-primary">{projekt.stats.completion}</div>
                  </div>
                  <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="text-sm text-secondary mb-1">Liczba lokali</div>
                    <div class="font-display font-bold text-primary">{projekt.stats.units}</div>
                  </div>
                  <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="text-sm text-secondary mb-1">Cena</div>
                    <div class="font-display font-bold text-primary">{projekt.stats.price}</div>
                  </div>
                </div>

                <!-- Features -->
                <div class="border-t pt-8">
                  <h3 class="font-display text-xl font-bold text-primary mb-6">Cechy inwestycji</h3>
                  <div class="grid grid-cols-2 gap-4">
                    {projekt.features.map((feature) => (
                      <div class="flex items-center text-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        {feature}
                      </div>
                    ))}
                  </div>
                </div>

                <div class="pt-8">
                  <a 
                    href="#" 
                    class="inline-flex items-center bg-accent hover:bg-primary text-white px-8 py-4 rounded-lg transition-colors"
                  >
                    Poznaj szczegóły
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-24 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="bg-primary rounded-2xl p-16 relative overflow-hidden">
          <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.2) 1px, transparent 0); background-size: 40px 40px;"></div>
          </div>
          <div class="relative z-10 max-w-3xl mx-auto text-center">
            <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-6">
              Zainteresowany naszymi projektami?
            </h2>
            <p class="text-gray-400 text-lg mb-8">
              Skontaktuj się z nami, aby dowiedzieć się więcej o naszych realizacjach i dostępnych mieszkaniach
            </p>
            <div class="flex flex-wrap justify-center gap-4">
              <a 
                href="/contact" 
                class="inline-block bg-accent hover:bg-accent/90 text-white px-8 py-4 rounded-lg font-medium transition-colors"
              >
                Skontaktuj się z nami
              </a>
              <a 
                href="#" 
                class="inline-block bg-white/10 hover:bg-white/20 text-white px-8 py-4 rounded-lg font-medium transition-colors"
              >
                Pobierz katalog
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    function initializeImageToggles() {
      const photoButtons = document.querySelectorAll('.photo-btn');
      const planButtons = document.querySelectorAll('.plan-btn');

      photoButtons.forEach((button) => {
        button.addEventListener('click', function() {
          const index = this.getAttribute('data-index');
          const photoContainer = document.querySelector(`.photo-container[data-index="${index}"]`);
          const planContainer = document.querySelector(`.plan-container[data-index="${index}"]`);
          
          // Show photo, hide plan
          photoContainer.classList.remove('hidden');
          planContainer.classList.add('hidden');
          
          // Update button states
          this.classList.add('active');
          document.querySelector(`.plan-btn[data-index="${index}"]`).classList.remove('active');
        });
      });

      planButtons.forEach((button) => {
        button.addEventListener('click', function() {
          const index = this.getAttribute('data-index');
          const photoContainer = document.querySelector(`.photo-container[data-index="${index}"]`);
          const planContainer = document.querySelector(`.plan-container[data-index="${index}"]`);
          
          // Show plan, hide photo
          planContainer.classList.remove('hidden');
          photoContainer.classList.add('hidden');
          
          // Update button states
          this.classList.add('active');
          document.querySelector(`.photo-btn[data-index="${index}"]`).classList.remove('active');
        });
      });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', initializeImageToggles);

    // Re-initialize after Astro view transitions
    document.addEventListener('astro:page-load', initializeImageToggles);
  </script>
</Layout> 